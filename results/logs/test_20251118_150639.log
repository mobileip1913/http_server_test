2025-11-18 15:06:39 | INFO     | 测试设置 - 并发数: 1, SN数量: 1, 测试模式: normal
2025-11-18 15:06:39 | INFO     | SN列表: ['FC012C2EA0CC']
2025-11-18 15:06:39 | WARNING  | File not found: D:\code\http_server\product_inquiries.txt, will use audio files only
2025-11-18 15:06:39 | INFO     | 
============================================================
2025-11-18 15:06:39 | INFO     | 开始测试 | SN数量: 1, 每个SN连接数: 1, 总并发连接数: 1, 测试模式: normal
2025-11-18 15:06:39 | INFO     | SN列表: FC012C2EA0CC
2025-11-18 15:06:39 | INFO     | ============================================================
2025-11-18 15:06:39 | INFO     | 共创建 1 个WebSocket客户端
2025-11-18 15:06:39 | INFO     | Connection #1: ========== AUTH REQUEST ==========
2025-11-18 15:06:39 | INFO     | Connection #1: Request URL: ws://192.168.110.53:8081/?sn=FC012C2EA0CC&sign=f5059bd1dadd6580df0fa398360390cd&platform=hw&bid=TKAI_BOARD_03_4G_VB6824_EYE_ST7789&fv=0.0.1&fvc=20250908001&strategy_id=0&uid=0&board_type=ml307&recover=0&enableP3=2&tool=idf&screen=1
2025-11-18 15:06:39 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:06:39 | INFO     | Connection #1: Request Headers:
2025-11-18 15:06:39 | INFO     | Connection #1:   Protocol-Version: 1
2025-11-18 15:06:39 | INFO     | Connection #1:   Device-Id: FC:01:2C:2E:A0:CC
2025-11-18 15:06:39 | INFO     | Connection #1: ==================================
2025-11-18 15:06:39 | INFO     | [CONNECTION] Connection #1 | Status: success | Duration: 15.98ms
2025-11-18 15:06:40 | INFO     | Connection #1: ========== AUTH RESPONSE ==========
2025-11-18 15:06:40 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:06:40 | INFO     | Connection #1: Response Code: 0
2025-11-18 15:06:40 | INFO     | Connection #1: Response Message: auth_success
2025-11-18 15:06:40 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:06:40 | INFO     | Connection #1: {
  "type": "auth",
  "code": 0,
  "msg": "auth_success",
  "data": {
    "sn": "FC012C2EA0CC",
    "volume": 60,
    "light": 50,
    "time": 1763449600366,
    "can_use_while_charging": 1
  }
}
2025-11-18 15:06:40 | INFO     | Connection #1: Session ID: None
2025-11-18 15:06:40 | INFO     | Connection #1: ====================================
2025-11-18 15:06:40 | INFO     | Connection #1: ✅ Auth SUCCESS | Code: 0, Message: auth_success, Session ID: None
2025-11-18 15:06:40 | INFO     | SN FC012C2EA0CC: 鉴权成功 (Conn #1)
2025-11-18 15:06:40 | INFO     | 
============================================================
2025-11-18 15:06:40 | INFO     | Testing [INQUIRY] #001: 询问 #1...
2025-11-18 15:06:40 | INFO     | Audio file: inquiry_001.opus
2025-11-18 15:06:40 | INFO     | ============================================================
2025-11-18 15:06:40 | INFO     | Detected Ogg Opus container, converting with ffmpeg...
2025-11-18 15:06:40 | INFO     | Converting Ogg Opus to PCM and re-encoding to raw Opus packets...
2025-11-18 15:06:40 | INFO     | Processed remaining 1104 bytes PCM data with 816 bytes padding (total 225744 bytes)
2025-11-18 15:06:40 | INFO     | Generated 118 raw Opus packets from PCM data (total 20954 bytes, processed 225744 bytes PCM, coverage: 99.6%)
2025-11-18 15:06:40 | INFO     | Detected 118 raw Opus packets from Ogg container. These MUST be sent individually (one per WebSocket message), ignoring SPLIT_OPUS_PACKETS=False
2025-11-18 15:06:40 | INFO     | Connection #1: ========== SEND START_LISTEN ==========
2025-11-18 15:06:40 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:06:40 | INFO     | Connection #1: WebSocket URL: ws://192.168.110.53:8081/?sn=FC012C2EA0CC&sign=f5059bd1dadd6580df0fa398360390cd&platform=hw&bid=TKAI_BOARD_03_4G_VB6824_EYE_ST7789&fv=0.0.1&fvc=20250908001&strategy_id=0&uid=0&board_type=ml307&recover=0&enableP3=2&tool=idf&screen=1
2025-11-18 15:06:40 | INFO     | Connection #1: Session ID: None
2025-11-18 15:06:40 | INFO     | Connection #1: Message Content:
2025-11-18 15:06:40 | INFO     | Connection #1: {
  "session_id": "",
  "type": "start_listen",
  "data": {
    "format": "opus",
    "tts_format": "opus",
    "playTag": 1,
    "state": "asr",
    "mode": "manual"
  }
}
2025-11-18 15:06:40 | INFO     | Connection #1: Message Size: 140 bytes
2025-11-18 15:06:40 | INFO     | Connection #1: =======================================
2025-11-18 15:06:48 | INFO     | Connection #1: ========== STT RESPONSE ==========
2025-11-18 15:06:48 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:06:48 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:06:48 | INFO     | Connection #1: {
  "type": "stt",
  "text": "你好，我想买点东北大米，听说长粒香米煮饭特别香，是真的吗？"
}
2025-11-18 15:06:48 | INFO     | Connection #1: Response Time: 7638.74ms (from send_start)
2025-11-18 15:06:48 | INFO     | Connection #1: Recognized Text: 你好，我想买点东北大米，听说长粒香米煮饭特别香，是真的吗？
2025-11-18 15:06:48 | INFO     | Connection #1: =================================
2025-11-18 15:06:48 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:06:48 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:06:48 | INFO     | Connection #1: State: start
2025-11-18 15:06:48 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:06:48 | INFO     | Connection #1: {
  "type": "tts",
  "state": "start"
}
2025-11-18 15:06:48 | INFO     | Connection #1: TTS Start Time
2025-11-18 15:06:48 | INFO     | Connection #1: =================================
2025-11-18 15:06:50 | INFO     | Connection #1: Received emoji message | Emotion: happy
2025-11-18 15:06:53 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:06:53 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:06:53 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:06:53 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:06:53 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "是的"
}
2025-11-18 15:06:53 | INFO     | Connection #1: TTS Sentence Start | Text: 是的
2025-11-18 15:06:53 | INFO     | Connection #1: =================================
2025-11-18 15:06:53 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:06:53 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:06:53 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:06:53 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:06:53 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:06:53 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:06:53 | INFO     | Connection #1: =================================
2025-11-18 15:06:53 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:06:53 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:06:53 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:06:53 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:06:53 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "，长粒香米是东北大米的优质品种之一，颗粒细长、色泽透亮"
}
2025-11-18 15:06:53 | INFO     | Connection #1: TTS Sentence Start | Text: ，长粒香米是东北大米的优质品种之一，颗粒细长、色泽透亮
2025-11-18 15:06:53 | INFO     | Connection #1: =================================
2025-11-18 15:06:58 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:06:58 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:06:58 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:06:58 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:06:58 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:06:58 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:06:58 | INFO     | Connection #1: =================================
2025-11-18 15:06:58 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:06:58 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:06:58 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:06:58 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:06:58 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "，煮熟后香气浓郁、口感松软有弹性，确实很受欢迎。"
}
2025-11-18 15:06:58 | INFO     | Connection #1: TTS Sentence Start | Text: ，煮熟后香气浓郁、口感松软有弹性，确实很受欢迎。
2025-11-18 15:06:58 | INFO     | Connection #1: =================================
2025-11-18 15:07:03 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:03 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:03 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:07:03 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:03 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:07:03 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:07:03 | INFO     | Connection #1: =================================
2025-11-18 15:07:03 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:03 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:03 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:07:03 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:03 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "如果你喜欢饭香浓郁、粒粒分明的米饭，它是个不错的选择！"
}
2025-11-18 15:07:03 | INFO     | Connection #1: TTS Sentence Start | Text: 如果你喜欢饭香浓郁、粒粒分明的米饭，它是个不错的选择！
2025-11-18 15:07:03 | INFO     | Connection #1: =================================
2025-11-18 15:07:08 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:08 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:08 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:07:08 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:08 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:07:08 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:07:08 | INFO     | Connection #1: =================================
2025-11-18 15:07:08 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:08 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:08 | INFO     | Connection #1: State: stop
2025-11-18 15:07:08 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:08 | INFO     | Connection #1: {
  "type": "tts",
  "state": "stop"
}
2025-11-18 15:07:08 | INFO     | Connection #1: TTS Stop Time | Duration: 19497.46ms
2025-11-18 15:07:08 | INFO     | Connection #1: =================================
2025-11-18 15:07:08 | INFO     | Connection #1: Received complete response at 19.0s
2025-11-18 15:07:08 | INFO     | ✓ Response received: [STT] 你好，我想买点东北大米，听说长粒香米煮饭特别香，是真的吗？ | [LLM] 是的 ，长粒香米是东北大米的优质品种之一，颗粒细长、色泽透亮 ，煮熟后香气浓郁、口感松软有弹性，确实很受欢迎。 ...
2025-11-18 15:07:08 | INFO     | 
============================================================
2025-11-18 15:07:08 | INFO     | Testing [PURCHASE] #001: 购买 #1...
2025-11-18 15:07:08 | INFO     | Audio file: purchase_001.opus
2025-11-18 15:07:08 | INFO     | ============================================================
2025-11-18 15:07:08 | INFO     | Detected Ogg Opus container, converting with ffmpeg...
2025-11-18 15:07:08 | INFO     | Converting Ogg Opus to PCM and re-encoding to raw Opus packets...
2025-11-18 15:07:08 | INFO     | Processed remaining 134 bytes PCM data with 1786 bytes padding (total 136454 bytes)
2025-11-18 15:07:08 | INFO     | Generated 72 raw Opus packets from PCM data (total 13957 bytes, processed 136454 bytes PCM, coverage: 98.7%)
2025-11-18 15:07:08 | INFO     | Detected 72 raw Opus packets from Ogg container. These MUST be sent individually (one per WebSocket message), ignoring SPLIT_OPUS_PACKETS=False
2025-11-18 15:07:08 | INFO     | Connection #1: ========== SEND START_LISTEN ==========
2025-11-18 15:07:08 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:08 | INFO     | Connection #1: WebSocket URL: ws://192.168.110.53:8081/?sn=FC012C2EA0CC&sign=f5059bd1dadd6580df0fa398360390cd&platform=hw&bid=TKAI_BOARD_03_4G_VB6824_EYE_ST7789&fv=0.0.1&fvc=20250908001&strategy_id=0&uid=0&board_type=ml307&recover=0&enableP3=2&tool=idf&screen=1
2025-11-18 15:07:08 | INFO     | Connection #1: Session ID: None
2025-11-18 15:07:08 | INFO     | Connection #1: Message Content:
2025-11-18 15:07:08 | INFO     | Connection #1: {
  "session_id": "",
  "type": "start_listen",
  "data": {
    "format": "opus",
    "tts_format": "opus",
    "playTag": 1,
    "state": "asr",
    "mode": "manual"
  }
}
2025-11-18 15:07:08 | INFO     | Connection #1: Message Size: 140 bytes
2025-11-18 15:07:08 | INFO     | Connection #1: =======================================
2025-11-18 15:07:14 | INFO     | Connection #1: ========== STT RESPONSE ==========
2025-11-18 15:07:14 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:14 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:14 | INFO     | Connection #1: {
  "type": "stt",
  "text": "听起来不错，我购买东北大米长粒香5公斤。"
}
2025-11-18 15:07:14 | INFO     | Connection #1: Response Time: 4743.43ms (from send_start)
2025-11-18 15:07:14 | INFO     | Connection #1: Recognized Text: 听起来不错，我购买东北大米长粒香5公斤。
2025-11-18 15:07:14 | INFO     | Connection #1: =================================
2025-11-18 15:07:14 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:14 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:14 | INFO     | Connection #1: State: start
2025-11-18 15:07:14 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:14 | INFO     | Connection #1: {
  "type": "tts",
  "state": "start"
}
2025-11-18 15:07:14 | INFO     | Connection #1: TTS Start Time | Duration: 21038.04ms
2025-11-18 15:07:14 | INFO     | Connection #1: =================================
2025-11-18 15:07:15 | INFO     | Connection #1: Received emoji message | Emotion: happy
2025-11-18 15:07:17 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:17 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:17 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:07:17 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:17 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "好的"
}
2025-11-18 15:07:17 | INFO     | Connection #1: TTS Sentence Start | Text: 好的
2025-11-18 15:07:17 | INFO     | Connection #1: =================================
2025-11-18 15:07:17 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:17 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:17 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:07:17 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:17 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:07:17 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:07:17 | INFO     | Connection #1: =================================
2025-11-18 15:07:17 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:17 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:17 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:07:17 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:17 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "，5公斤装的长粒香米通常能满足一个家庭一段时间的需求。"
}
2025-11-18 15:07:17 | INFO     | Connection #1: TTS Sentence Start | Text: ，5公斤装的长粒香米通常能满足一个家庭一段时间的需求。
2025-11-18 15:07:17 | INFO     | Connection #1: =================================
2025-11-18 15:07:23 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:23 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:23 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:07:23 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:23 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:07:23 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:07:23 | INFO     | Connection #1: =================================
2025-11-18 15:07:23 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:23 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:23 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:07:23 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:23 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "建议选择正规渠道购买，注意查看生产日期和产地标识，确保新鲜正宗。"
}
2025-11-18 15:07:23 | INFO     | Connection #1: TTS Sentence Start | Text: 建议选择正规渠道购买，注意查看生产日期和产地标识，确保新鲜正宗。
2025-11-18 15:07:23 | INFO     | Connection #1: =================================
2025-11-18 15:07:30 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:30 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:30 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:07:30 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:30 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:07:30 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:07:30 | INFO     | Connection #1: =================================
2025-11-18 15:07:30 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:30 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:30 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:07:30 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:30 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "如果有其他需求，比如真空包装或有机认证，也可以留意一下哦！"
}
2025-11-18 15:07:30 | INFO     | Connection #1: TTS Sentence Start | Text: 如果有其他需求，比如真空包装或有机认证，也可以留意一下哦！
2025-11-18 15:07:30 | INFO     | Connection #1: =================================
2025-11-18 15:07:35 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:35 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:35 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:07:35 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:35 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:07:35 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:07:35 | INFO     | Connection #1: =================================
2025-11-18 15:07:35 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:35 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:35 | INFO     | Connection #1: State: stop
2025-11-18 15:07:35 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:35 | INFO     | Connection #1: {
  "type": "tts",
  "state": "stop"
}
2025-11-18 15:07:35 | INFO     | Connection #1: TTS Stop Time | Duration: 21728.98ms
2025-11-18 15:07:35 | INFO     | Connection #1: =================================
2025-11-18 15:07:35 | INFO     | Connection #1: Received complete response at 21.0s
2025-11-18 15:07:35 | INFO     | ✓ Response received: [STT] 听起来不错，我购买东北大米长粒香5公斤。 | [LLM] 好的 ，5公斤装的长粒香米通常能满足一个家庭一段时间的需求。 建议选择正规渠道购买，注意查看生产日期和产地标识，确保新鲜正宗。 如...
2025-11-18 15:07:36 | INFO     | 
============================================================
2025-11-18 15:07:36 | INFO     | Testing [INQUIRY] #002: 询问 #2...
2025-11-18 15:07:36 | INFO     | Audio file: inquiry_002.opus
2025-11-18 15:07:36 | INFO     | ============================================================
2025-11-18 15:07:36 | INFO     | Detected Ogg Opus container, converting with ffmpeg...
2025-11-18 15:07:36 | INFO     | Converting Ogg Opus to PCM and re-encoding to raw Opus packets...
2025-11-18 15:07:36 | INFO     | Processed remaining 1272 bytes PCM data with 648 bytes padding (total 177912 bytes)
2025-11-18 15:07:36 | INFO     | Generated 93 raw Opus packets from PCM data (total 18790 bytes, processed 177912 bytes PCM, coverage: 99.6%)
2025-11-18 15:07:36 | INFO     | Detected 93 raw Opus packets from Ogg container. These MUST be sent individually (one per WebSocket message), ignoring SPLIT_OPUS_PACKETS=False
2025-11-18 15:07:36 | INFO     | Connection #1: ========== SEND START_LISTEN ==========
2025-11-18 15:07:36 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:36 | INFO     | Connection #1: WebSocket URL: ws://192.168.110.53:8081/?sn=FC012C2EA0CC&sign=f5059bd1dadd6580df0fa398360390cd&platform=hw&bid=TKAI_BOARD_03_4G_VB6824_EYE_ST7789&fv=0.0.1&fvc=20250908001&strategy_id=0&uid=0&board_type=ml307&recover=0&enableP3=2&tool=idf&screen=1
2025-11-18 15:07:36 | INFO     | Connection #1: Session ID: None
2025-11-18 15:07:36 | INFO     | Connection #1: Message Content:
2025-11-18 15:07:36 | INFO     | Connection #1: {
  "session_id": "",
  "type": "start_listen",
  "data": {
    "format": "opus",
    "tts_format": "opus",
    "playTag": 1,
    "state": "asr",
    "mode": "manual"
  }
}
2025-11-18 15:07:36 | INFO     | Connection #1: Message Size: 140 bytes
2025-11-18 15:07:36 | INFO     | Connection #1: =======================================
2025-11-18 15:07:42 | INFO     | Connection #1: ========== STT RESPONSE ==========
2025-11-18 15:07:42 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:42 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:42 | INFO     | Connection #1: {
  "type": "stt",
  "text": "东北长粒香米的米粒是细长的吗？煮出来的米饭会不会很硬？"
}
2025-11-18 15:07:42 | INFO     | Connection #1: Response Time: 6074.92ms (from send_start)
2025-11-18 15:07:42 | INFO     | Connection #1: Recognized Text: 东北长粒香米的米粒是细长的吗？煮出来的米饭会不会很硬？
2025-11-18 15:07:42 | INFO     | Connection #1: =================================
2025-11-18 15:07:42 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:42 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:42 | INFO     | Connection #1: State: start
2025-11-18 15:07:42 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:42 | INFO     | Connection #1: {
  "type": "tts",
  "state": "start"
}
2025-11-18 15:07:42 | INFO     | Connection #1: TTS Start Time | Duration: 25360.12ms
2025-11-18 15:07:42 | INFO     | Connection #1: =================================
2025-11-18 15:07:44 | INFO     | Connection #1: Received emoji message | Emotion: happy
2025-11-18 15:07:47 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:47 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:47 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:07:47 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:47 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "是的，东北长粒香米的米粒通常比较细长"
}
2025-11-18 15:07:47 | INFO     | Connection #1: TTS Sentence Start | Text: 是的，东北长粒香米的米粒通常比较细长
2025-11-18 15:07:47 | INFO     | Connection #1: =================================
2025-11-18 15:07:50 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:50 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:50 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:07:50 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:50 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:07:50 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:07:50 | INFO     | Connection #1: =================================
2025-11-18 15:07:50 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:50 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:50 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:07:50 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:50 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "，外观晶莹剔透。煮熟后米饭松软适中，不会很硬，反而富有弹性且带有自然米香。"
}
2025-11-18 15:07:50 | INFO     | Connection #1: TTS Sentence Start | Text: ，外观晶莹剔透。煮熟后米饭松软适中，不会很硬，反而富有弹性且带有自然米香。
2025-11-18 15:07:50 | INFO     | Connection #1: =================================
2025-11-18 15:07:58 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:58 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:58 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:07:58 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:58 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:07:58 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:07:58 | INFO     | Connection #1: =================================
2025-11-18 15:07:58 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:07:58 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:07:58 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:07:58 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:07:58 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "如果喜欢更软糯的口感，可以适当增加水量或延长焖饭时间。"
}
2025-11-18 15:07:58 | INFO     | Connection #1: TTS Sentence Start | Text: 如果喜欢更软糯的口感，可以适当增加水量或延长焖饭时间。
2025-11-18 15:07:58 | INFO     | Connection #1: =================================
2025-11-18 15:08:04 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:08:04 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:08:04 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:08:04 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:08:04 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:08:04 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:08:04 | INFO     | Connection #1: =================================
2025-11-18 15:08:04 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:08:04 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:08:04 | INFO     | Connection #1: State: stop
2025-11-18 15:08:04 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:08:04 | INFO     | Connection #1: {
  "type": "tts",
  "state": "stop"
}
2025-11-18 15:08:04 | INFO     | Connection #1: TTS Stop Time | Duration: 21884.40ms
2025-11-18 15:08:04 | INFO     | Connection #1: =================================
2025-11-18 15:08:04 | INFO     | Connection #1: Received complete response at 21.1s
2025-11-18 15:08:04 | INFO     | ✓ Response received: [STT] 东北长粒香米的米粒是细长的吗？煮出来的米饭会不会很硬？ | [LLM] 是的，东北长粒香米的米粒通常比较细长 ，外观晶莹剔透。煮熟后米饭松软适中，不会很硬，反而富有弹性且带有自然米香。 如...
2025-11-18 15:08:04 | INFO     | 
============================================================
2025-11-18 15:08:04 | INFO     | Testing [PURCHASE] #002: 购买 #2...
2025-11-18 15:08:04 | INFO     | Audio file: purchase_002.opus
2025-11-18 15:08:04 | INFO     | ============================================================
2025-11-18 15:08:04 | INFO     | Detected Ogg Opus container, converting with ffmpeg...
2025-11-18 15:08:04 | INFO     | Converting Ogg Opus to PCM and re-encoding to raw Opus packets...
2025-11-18 15:08:05 | INFO     | Processed remaining 594 bytes PCM data with 1326 bytes padding (total 117714 bytes)
2025-11-18 15:08:05 | INFO     | Generated 62 raw Opus packets from PCM data (total 11837 bytes, processed 117714 bytes PCM, coverage: 98.9%)
2025-11-18 15:08:05 | INFO     | Detected 62 raw Opus packets from Ogg container. These MUST be sent individually (one per WebSocket message), ignoring SPLIT_OPUS_PACKETS=False
2025-11-18 15:08:05 | INFO     | Connection #1: ========== SEND START_LISTEN ==========
2025-11-18 15:08:05 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:08:05 | INFO     | Connection #1: WebSocket URL: ws://192.168.110.53:8081/?sn=FC012C2EA0CC&sign=f5059bd1dadd6580df0fa398360390cd&platform=hw&bid=TKAI_BOARD_03_4G_VB6824_EYE_ST7789&fv=0.0.1&fvc=20250908001&strategy_id=0&uid=0&board_type=ml307&recover=0&enableP3=2&tool=idf&screen=1
2025-11-18 15:08:05 | INFO     | Connection #1: Session ID: None
2025-11-18 15:08:05 | INFO     | Connection #1: Message Content:
2025-11-18 15:08:05 | INFO     | Connection #1: {
  "session_id": "",
  "type": "start_listen",
  "data": {
    "format": "opus",
    "tts_format": "opus",
    "playTag": 1,
    "state": "asr",
    "mode": "manual"
  }
}
2025-11-18 15:08:05 | INFO     | Connection #1: Message Size: 140 bytes
2025-11-18 15:08:05 | INFO     | Connection #1: =======================================
2025-11-18 15:08:09 | INFO     | Connection #1: ========== STT RESPONSE ==========
2025-11-18 15:08:09 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:08:09 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:08:09 | INFO     | Connection #1: {
  "type": "stt",
  "text": "好的，我购买东北大米长粒香5公斤。"
}
2025-11-18 15:08:09 | INFO     | Connection #1: Response Time: 4065.37ms (from send_start)
2025-11-18 15:08:09 | INFO     | Connection #1: Recognized Text: 好的，我购买东北大米长粒香5公斤。
2025-11-18 15:08:09 | INFO     | Connection #1: =================================
2025-11-18 15:08:09 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:08:09 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:08:09 | INFO     | Connection #1: State: start
2025-11-18 15:08:09 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:08:09 | INFO     | Connection #1: {
  "type": "tts",
  "state": "start"
}
2025-11-18 15:08:09 | INFO     | Connection #1: TTS Start Time | Duration: 22319.56ms
2025-11-18 15:08:09 | INFO     | Connection #1: =================================
2025-11-18 15:08:10 | INFO     | Connection #1: Received emoji message | Emotion: happy
2025-11-18 15:08:12 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:08:12 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:08:12 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:08:12 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:08:12 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "很好！"
}
2025-11-18 15:08:12 | INFO     | Connection #1: TTS Sentence Start | Text: 很好！
2025-11-18 15:08:12 | INFO     | Connection #1: =================================
2025-11-18 15:08:13 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:08:13 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:08:13 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:08:13 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:08:13 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:08:13 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:08:13 | INFO     | Connection #1: =================================
2025-11-18 15:08:13 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:08:13 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:08:13 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:08:13 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:08:13 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "5公斤的东北长粒香米足够日常食用一段时间。"
}
2025-11-18 15:08:13 | INFO     | Connection #1: TTS Sentence Start | Text: 5公斤的东北长粒香米足够日常食用一段时间。
2025-11-18 15:08:13 | INFO     | Connection #1: =================================
2025-11-18 15:08:17 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:08:17 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:08:17 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:08:17 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:08:17 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:08:17 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:08:17 | INFO     | Connection #1: =================================
2025-11-18 15:08:17 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:08:17 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:08:17 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:08:17 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:08:17 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "记得选择信誉好的商家，注意查看生产日期和保质期，以确保新鲜度和口感最佳。"
}
2025-11-18 15:08:17 | INFO     | Connection #1: TTS Sentence Start | Text: 记得选择信誉好的商家，注意查看生产日期和保质期，以确保新鲜度和口感最佳。
2025-11-18 15:08:17 | INFO     | Connection #1: =================================
2025-11-18 15:08:24 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:08:24 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:08:24 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:08:24 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:08:24 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:08:24 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:08:24 | INFO     | Connection #1: =================================
2025-11-18 15:08:24 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:08:24 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:08:24 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:08:24 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:08:24 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "享受喷香的米饭吧！"
}
2025-11-18 15:08:24 | INFO     | Connection #1: TTS Sentence Start | Text: 享受喷香的米饭吧！
2025-11-18 15:08:24 | INFO     | Connection #1: =================================
2025-11-18 15:08:26 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:08:26 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:08:26 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:08:26 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:08:26 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:08:26 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:08:26 | INFO     | Connection #1: =================================
2025-11-18 15:08:26 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:08:26 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:08:26 | INFO     | Connection #1: State: stop
2025-11-18 15:08:26 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:08:26 | INFO     | Connection #1: {
  "type": "tts",
  "state": "stop"
}
2025-11-18 15:08:26 | INFO     | Connection #1: TTS Stop Time | Duration: 17160.00ms
2025-11-18 15:08:26 | INFO     | Connection #1: =================================
2025-11-18 15:08:26 | INFO     | Connection #1: Received complete response at 16.4s
2025-11-18 15:08:26 | INFO     | ✓ Response received: [STT] 好的，我购买东北大米长粒香5公斤。 | [LLM] 很好！ 5公斤的东北长粒香米足够日常食用一段时间。 记得选择信誉好的商家，注意查看生产日期和保质期，以确保新鲜度和口感最佳。 享受喷香的...
2025-11-18 15:08:27 | INFO     | SN FC012C2EA0CC (Conn #1): 任务处理完成
2025-11-18 15:23:40 | WARNING  | Connection #1: Connection closed by server/network, received 1172 messages total
2025-11-18 15:23:48 | INFO     | 测试设置 - 并发数: 1, SN数量: 1, 测试模式: normal
2025-11-18 15:23:48 | INFO     | SN列表: ['FC012C2EA0CC']
2025-11-18 15:23:48 | WARNING  | File not found: D:\code\http_server\product_inquiries.txt, will use audio files only
2025-11-18 15:23:48 | INFO     | 
============================================================
2025-11-18 15:23:48 | INFO     | 开始测试 | SN数量: 1, 每个SN连接数: 1, 总并发连接数: 1, 测试模式: normal
2025-11-18 15:23:48 | INFO     | SN列表: FC012C2EA0CC
2025-11-18 15:23:48 | INFO     | ============================================================
2025-11-18 15:23:48 | INFO     | 共创建 1 个WebSocket客户端
2025-11-18 15:23:48 | INFO     | Connection #1: ========== AUTH REQUEST ==========
2025-11-18 15:23:48 | INFO     | Connection #1: Request URL: ws://192.168.110.53:8081/?sn=FC012C2EA0CC&sign=f5059bd1dadd6580df0fa398360390cd&platform=hw&bid=TKAI_BOARD_03_4G_VB6824_EYE_ST7789&fv=0.0.1&fvc=20250908001&strategy_id=0&uid=0&board_type=ml307&recover=0&enableP3=2&tool=idf&screen=1
2025-11-18 15:23:48 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:23:48 | INFO     | Connection #1: Request Headers:
2025-11-18 15:23:48 | INFO     | Connection #1:   Protocol-Version: 1
2025-11-18 15:23:48 | INFO     | Connection #1:   Device-Id: FC:01:2C:2E:A0:CC
2025-11-18 15:23:48 | INFO     | Connection #1: ==================================
2025-11-18 15:23:48 | INFO     | [CONNECTION] Connection #1 | Status: success | Duration: 5.00ms
2025-11-18 15:23:49 | INFO     | Connection #1: ========== AUTH RESPONSE ==========
2025-11-18 15:23:49 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:23:49 | INFO     | Connection #1: Response Code: 0
2025-11-18 15:23:49 | INFO     | Connection #1: Response Message: auth_success
2025-11-18 15:23:49 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:23:49 | INFO     | Connection #1: {
  "type": "auth",
  "code": 0,
  "msg": "auth_success",
  "data": {
    "sn": "FC012C2EA0CC",
    "volume": 60,
    "light": 50,
    "time": 1763450629346,
    "can_use_while_charging": 1
  }
}
2025-11-18 15:23:49 | INFO     | Connection #1: Session ID: None
2025-11-18 15:23:49 | INFO     | Connection #1: ====================================
2025-11-18 15:23:49 | INFO     | Connection #1: ✅ Auth SUCCESS | Code: 0, Message: auth_success, Session ID: None
2025-11-18 15:23:49 | INFO     | SN FC012C2EA0CC: 鉴权成功 (Conn #1)
2025-11-18 15:23:49 | INFO     | 
============================================================
2025-11-18 15:23:49 | INFO     | Testing [INQUIRY] #001: 询问 #1...
2025-11-18 15:23:49 | INFO     | Audio file: inquiry_001.opus
2025-11-18 15:23:49 | INFO     | ============================================================
2025-11-18 15:23:49 | INFO     | Detected Ogg Opus container, converting with ffmpeg...
2025-11-18 15:23:49 | INFO     | Converting Ogg Opus to PCM and re-encoding to raw Opus packets...
2025-11-18 15:23:49 | INFO     | Processed remaining 1104 bytes PCM data with 816 bytes padding (total 225744 bytes)
2025-11-18 15:23:49 | INFO     | Generated 118 raw Opus packets from PCM data (total 20954 bytes, processed 225744 bytes PCM, coverage: 99.6%)
2025-11-18 15:23:49 | INFO     | Detected 118 raw Opus packets from Ogg container. These MUST be sent individually (one per WebSocket message), ignoring SPLIT_OPUS_PACKETS=False
2025-11-18 15:23:49 | INFO     | Connection #1: ========== SEND START_LISTEN ==========
2025-11-18 15:23:49 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:23:49 | INFO     | Connection #1: WebSocket URL: ws://192.168.110.53:8081/?sn=FC012C2EA0CC&sign=f5059bd1dadd6580df0fa398360390cd&platform=hw&bid=TKAI_BOARD_03_4G_VB6824_EYE_ST7789&fv=0.0.1&fvc=20250908001&strategy_id=0&uid=0&board_type=ml307&recover=0&enableP3=2&tool=idf&screen=1
2025-11-18 15:23:49 | INFO     | Connection #1: Session ID: None
2025-11-18 15:23:49 | INFO     | Connection #1: Message Content:
2025-11-18 15:23:49 | INFO     | Connection #1: {
  "session_id": "",
  "type": "start_listen",
  "data": {
    "format": "opus",
    "tts_format": "opus",
    "playTag": 1,
    "state": "asr",
    "mode": "manual"
  }
}
2025-11-18 15:23:49 | INFO     | Connection #1: Message Size: 140 bytes
2025-11-18 15:23:49 | INFO     | Connection #1: =======================================
2025-11-18 15:23:57 | INFO     | Connection #1: ========== STT RESPONSE ==========
2025-11-18 15:23:57 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:23:57 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:23:57 | INFO     | Connection #1: {
  "type": "stt",
  "text": "你好，我想买点东北大米，听说长粒香米煮饭特别香，是真的吗？"
}
2025-11-18 15:23:57 | INFO     | Connection #1: Response Time: 7657.01ms (from send_start)
2025-11-18 15:23:57 | INFO     | Connection #1: Recognized Text: 你好，我想买点东北大米，听说长粒香米煮饭特别香，是真的吗？
2025-11-18 15:23:57 | INFO     | Connection #1: =================================
2025-11-18 15:23:57 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:23:57 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:23:57 | INFO     | Connection #1: State: start
2025-11-18 15:23:57 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:23:57 | INFO     | Connection #1: {
  "type": "tts",
  "state": "start"
}
2025-11-18 15:23:57 | INFO     | Connection #1: TTS Start Time
2025-11-18 15:23:57 | INFO     | Connection #1: =================================
2025-11-18 15:23:59 | INFO     | Connection #1: Received emoji message | Emotion: happy
2025-11-18 15:24:02 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:02 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:02 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:24:02 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:02 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "是的"
}
2025-11-18 15:24:02 | INFO     | Connection #1: TTS Sentence Start | Text: 是的
2025-11-18 15:24:02 | INFO     | Connection #1: =================================
2025-11-18 15:24:03 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:03 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:03 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:24:03 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:03 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:24:03 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:24:03 | INFO     | Connection #1: =================================
2025-11-18 15:24:03 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:03 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:03 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:24:03 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:03 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "，长粒香米是东北大米的优质品种之一，颗粒细长，煮熟后香气浓郁、口感松软有弹性"
}
2025-11-18 15:24:03 | INFO     | Connection #1: TTS Sentence Start | Text: ，长粒香米是东北大米的优质品种之一，颗粒细长，煮熟后香气浓郁、口感松软有弹性
2025-11-18 15:24:03 | INFO     | Connection #1: =================================
2025-11-18 15:24:10 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:10 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:10 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:24:10 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:10 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:24:10 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:24:10 | INFO     | Connection #1: =================================
2025-11-18 15:24:10 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:10 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:10 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:24:10 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:10 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "，深受喜爱。它的香味主要来自种植环境和品种特性，蒸饭时满屋飘香是常有的体验。"
}
2025-11-18 15:24:10 | INFO     | Connection #1: TTS Sentence Start | Text: ，深受喜爱。它的香味主要来自种植环境和品种特性，蒸饭时满屋飘香是常有的体验。
2025-11-18 15:24:10 | INFO     | Connection #1: =================================
2025-11-18 15:24:19 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:19 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:19 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:24:19 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:19 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:24:19 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:24:19 | INFO     | Connection #1: =================================
2025-11-18 15:24:19 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:19 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:19 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:24:19 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:19 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "若追求香气和口感，长粒香米确实是个不错的选择。"
}
2025-11-18 15:24:19 | INFO     | Connection #1: TTS Sentence Start | Text: 若追求香气和口感，长粒香米确实是个不错的选择。
2025-11-18 15:24:19 | INFO     | Connection #1: =================================
2025-11-18 15:24:23 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:23 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:23 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:24:23 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:23 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:24:23 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:24:23 | INFO     | Connection #1: =================================
2025-11-18 15:24:23 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:23 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:23 | INFO     | Connection #1: State: stop
2025-11-18 15:24:23 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:23 | INFO     | Connection #1: {
  "type": "tts",
  "state": "stop"
}
2025-11-18 15:24:23 | INFO     | Connection #1: TTS Stop Time | Duration: 25984.23ms
2025-11-18 15:24:23 | INFO     | Connection #1: =================================
2025-11-18 15:24:23 | INFO     | Connection #1: Received complete response at 24.8s
2025-11-18 15:24:23 | INFO     | ✓ Response received: [STT] 你好，我想买点东北大米，听说长粒香米煮饭特别香，是真的吗？ | [LLM] 是的 ，长粒香米是东北大米的优质品种之一，颗粒细长，煮熟后香气浓郁、口感松软有弹性 ，深受喜爱。它的香味主要来自...
2025-11-18 15:24:24 | INFO     | 
============================================================
2025-11-18 15:24:24 | INFO     | Testing [PURCHASE] #001: 购买 #1...
2025-11-18 15:24:24 | INFO     | Audio file: purchase_001.opus
2025-11-18 15:24:24 | INFO     | ============================================================
2025-11-18 15:24:24 | INFO     | Detected Ogg Opus container, converting with ffmpeg...
2025-11-18 15:24:24 | INFO     | Converting Ogg Opus to PCM and re-encoding to raw Opus packets...
2025-11-18 15:24:24 | INFO     | Processed remaining 134 bytes PCM data with 1786 bytes padding (total 136454 bytes)
2025-11-18 15:24:24 | INFO     | Generated 72 raw Opus packets from PCM data (total 13957 bytes, processed 136454 bytes PCM, coverage: 98.7%)
2025-11-18 15:24:24 | INFO     | Detected 72 raw Opus packets from Ogg container. These MUST be sent individually (one per WebSocket message), ignoring SPLIT_OPUS_PACKETS=False
2025-11-18 15:24:24 | INFO     | Connection #1: ========== SEND START_LISTEN ==========
2025-11-18 15:24:24 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:24 | INFO     | Connection #1: WebSocket URL: ws://192.168.110.53:8081/?sn=FC012C2EA0CC&sign=f5059bd1dadd6580df0fa398360390cd&platform=hw&bid=TKAI_BOARD_03_4G_VB6824_EYE_ST7789&fv=0.0.1&fvc=20250908001&strategy_id=0&uid=0&board_type=ml307&recover=0&enableP3=2&tool=idf&screen=1
2025-11-18 15:24:24 | INFO     | Connection #1: Session ID: None
2025-11-18 15:24:24 | INFO     | Connection #1: Message Content:
2025-11-18 15:24:24 | INFO     | Connection #1: {
  "session_id": "",
  "type": "start_listen",
  "data": {
    "format": "opus",
    "tts_format": "opus",
    "playTag": 1,
    "state": "asr",
    "mode": "manual"
  }
}
2025-11-18 15:24:24 | INFO     | Connection #1: Message Size: 140 bytes
2025-11-18 15:24:24 | INFO     | Connection #1: =======================================
2025-11-18 15:24:29 | INFO     | Connection #1: ========== STT RESPONSE ==========
2025-11-18 15:24:29 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:29 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:29 | INFO     | Connection #1: {
  "type": "stt",
  "text": "听起来不错，我购买东北大米长粒香5公斤。"
}
2025-11-18 15:24:29 | INFO     | Connection #1: Response Time: 4716.70ms (from send_start)
2025-11-18 15:24:29 | INFO     | Connection #1: Recognized Text: 听起来不错，我购买东北大米长粒香5公斤。
2025-11-18 15:24:29 | INFO     | Connection #1: =================================
2025-11-18 15:24:29 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:29 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:29 | INFO     | Connection #1: State: start
2025-11-18 15:24:29 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:29 | INFO     | Connection #1: {
  "type": "tts",
  "state": "start"
}
2025-11-18 15:24:29 | INFO     | Connection #1: TTS Start Time | Duration: 26620.72ms
2025-11-18 15:24:29 | INFO     | Connection #1: =================================
2025-11-18 15:24:31 | INFO     | Connection #1: Received emoji message | Emotion: happy
2025-11-18 15:24:33 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:33 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:33 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:24:33 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:33 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "好的，5公斤装的长粒香米分量适中"
}
2025-11-18 15:24:33 | INFO     | Connection #1: TTS Sentence Start | Text: 好的，5公斤装的长粒香米分量适中
2025-11-18 15:24:33 | INFO     | Connection #1: =================================
2025-11-18 15:24:36 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:36 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:36 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:24:36 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:36 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:24:36 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:24:36 | INFO     | Connection #1: =================================
2025-11-18 15:24:36 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:36 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:36 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:24:36 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:36 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "，适合家庭日常食用。东北长粒香米煮出的米饭香气足、口感好，相信你会喜欢。"
}
2025-11-18 15:24:37 | INFO     | Connection #1: TTS Sentence Start | Text: ，适合家庭日常食用。东北长粒香米煮出的米饭香气足、口感好，相信你会喜欢。
2025-11-18 15:24:37 | INFO     | Connection #1: =================================
2025-11-18 15:24:44 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:44 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:44 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:24:44 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:44 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:24:44 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:24:44 | INFO     | Connection #1: =================================
2025-11-18 15:24:44 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:44 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:44 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:24:44 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:44 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "购买时建议选择正规渠道，确保新鲜度和品质。如有其他需求也可以随时告诉我！"
}
2025-11-18 15:24:44 | INFO     | Connection #1: TTS Sentence Start | Text: 购买时建议选择正规渠道，确保新鲜度和品质。如有其他需求也可以随时告诉我！
2025-11-18 15:24:44 | INFO     | Connection #1: =================================
2025-11-18 15:24:51 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:51 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:51 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:24:51 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:51 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:24:51 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:24:51 | INFO     | Connection #1: =================================
2025-11-18 15:24:51 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:24:51 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:24:51 | INFO     | Connection #1: State: stop
2025-11-18 15:24:51 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:24:51 | INFO     | Connection #1: {
  "type": "tts",
  "state": "stop"
}
2025-11-18 15:24:51 | INFO     | Connection #1: TTS Stop Time | Duration: 22017.67ms
2025-11-18 15:24:51 | INFO     | Connection #1: =================================
2025-11-18 15:24:51 | INFO     | Connection #1: Received complete response at 21.1s
2025-11-18 15:24:51 | INFO     | ✓ Response received: [STT] 听起来不错，我购买东北大米长粒香5公斤。 | [LLM] 好的，5公斤装的长粒香米分量适中 ，适合家庭日常食用。东北长粒香米煮出的米饭香气足、口感好，相信你会喜欢。 购买时建议选择正规渠道...
2025-11-18 15:24:51 | INFO     | SN FC012C2EA0CC (Conn #1): 任务处理完成
2025-11-18 15:42:53 | WARNING  | Connection #1: Connection closed by server/network, received 686 messages total
2025-11-18 15:43:06 | INFO     | 测试设置 - 并发数: 1, SN数量: 1, 测试模式: normal
2025-11-18 15:43:06 | INFO     | SN列表: ['FC012C2EA0CC']
2025-11-18 15:43:06 | WARNING  | File not found: D:\code\http_server\product_inquiries.txt, will use audio files only
2025-11-18 15:43:06 | INFO     | 
============================================================
2025-11-18 15:43:06 | INFO     | 开始测试 | SN数量: 1, 每个SN连接数: 1, 总并发连接数: 1, 测试模式: normal
2025-11-18 15:43:06 | INFO     | SN列表: FC012C2EA0CC
2025-11-18 15:43:06 | INFO     | ============================================================
2025-11-18 15:43:06 | INFO     | 共创建 1 个WebSocket客户端
2025-11-18 15:43:06 | INFO     | Connection #1: ========== AUTH REQUEST ==========
2025-11-18 15:43:06 | INFO     | Connection #1: Request URL: ws://192.168.110.53:8081/?sn=FC012C2EA0CC&sign=f5059bd1dadd6580df0fa398360390cd&platform=hw&bid=TKAI_BOARD_03_4G_VB6824_EYE_ST7789&fv=0.0.1&fvc=20250908001&strategy_id=0&uid=0&board_type=ml307&recover=0&enableP3=2&tool=idf&screen=1
2025-11-18 15:43:06 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:06 | INFO     | Connection #1: Request Headers:
2025-11-18 15:43:06 | INFO     | Connection #1:   Protocol-Version: 1
2025-11-18 15:43:06 | INFO     | Connection #1:   Device-Id: FC:01:2C:2E:A0:CC
2025-11-18 15:43:06 | INFO     | Connection #1: ==================================
2025-11-18 15:43:06 | INFO     | [CONNECTION] Connection #1 | Status: success | Duration: 4.00ms
2025-11-18 15:43:07 | INFO     | Connection #1: ========== AUTH RESPONSE ==========
2025-11-18 15:43:07 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:07 | INFO     | Connection #1: Response Code: 0
2025-11-18 15:43:07 | INFO     | Connection #1: Response Message: auth_success
2025-11-18 15:43:07 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:07 | INFO     | Connection #1: {
  "type": "auth",
  "code": 0,
  "msg": "auth_success",
  "data": {
    "sn": "FC012C2EA0CC",
    "volume": 60,
    "light": 50,
    "time": 1763451787074,
    "can_use_while_charging": 1
  }
}
2025-11-18 15:43:07 | INFO     | Connection #1: Session ID: None
2025-11-18 15:43:07 | INFO     | Connection #1: ====================================
2025-11-18 15:43:07 | INFO     | Connection #1: ✅ Auth SUCCESS | Code: 0, Message: auth_success, Session ID: None
2025-11-18 15:43:07 | INFO     | SN FC012C2EA0CC: 鉴权成功 (Conn #1)
2025-11-18 15:43:07 | INFO     | 
============================================================
2025-11-18 15:43:07 | INFO     | Testing [INQUIRY] #001: 询问 #1...
2025-11-18 15:43:07 | INFO     | Audio file: inquiry_001.opus
2025-11-18 15:43:07 | INFO     | ============================================================
2025-11-18 15:43:07 | INFO     | Detected Ogg Opus container, converting with ffmpeg...
2025-11-18 15:43:07 | INFO     | Converting Ogg Opus to PCM and re-encoding to raw Opus packets...
2025-11-18 15:43:07 | INFO     | Processed remaining 1104 bytes PCM data with 816 bytes padding (total 225744 bytes)
2025-11-18 15:43:07 | INFO     | Generated 118 raw Opus packets from PCM data (total 20954 bytes, processed 225744 bytes PCM, coverage: 99.6%)
2025-11-18 15:43:07 | INFO     | Detected 118 raw Opus packets from Ogg container. These MUST be sent individually (one per WebSocket message), ignoring SPLIT_OPUS_PACKETS=False
2025-11-18 15:43:07 | INFO     | Connection #1: ========== SEND START_LISTEN ==========
2025-11-18 15:43:07 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:07 | INFO     | Connection #1: WebSocket URL: ws://192.168.110.53:8081/?sn=FC012C2EA0CC&sign=f5059bd1dadd6580df0fa398360390cd&platform=hw&bid=TKAI_BOARD_03_4G_VB6824_EYE_ST7789&fv=0.0.1&fvc=20250908001&strategy_id=0&uid=0&board_type=ml307&recover=0&enableP3=2&tool=idf&screen=1
2025-11-18 15:43:07 | INFO     | Connection #1: Session ID: None
2025-11-18 15:43:07 | INFO     | Connection #1: Message Content:
2025-11-18 15:43:07 | INFO     | Connection #1: {
  "session_id": "",
  "type": "start_listen",
  "data": {
    "format": "opus",
    "tts_format": "opus",
    "playTag": 1,
    "state": "asr",
    "mode": "manual"
  }
}
2025-11-18 15:43:07 | INFO     | Connection #1: Message Size: 140 bytes
2025-11-18 15:43:07 | INFO     | Connection #1: =======================================
2025-11-18 15:43:15 | INFO     | Connection #1: ========== STT RESPONSE ==========
2025-11-18 15:43:15 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:15 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:15 | INFO     | Connection #1: {
  "type": "stt",
  "text": "你好，我想买点东北大米，听说长粒香米煮饭特别香，是真的吗？"
}
2025-11-18 15:43:15 | INFO     | Connection #1: Response Time: 7682.80ms (from send_start)
2025-11-18 15:43:15 | INFO     | Connection #1: Recognized Text: 你好，我想买点东北大米，听说长粒香米煮饭特别香，是真的吗？
2025-11-18 15:43:15 | INFO     | Connection #1: =================================
2025-11-18 15:43:15 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:15 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:15 | INFO     | Connection #1: State: start
2025-11-18 15:43:15 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:15 | INFO     | Connection #1: {
  "type": "tts",
  "state": "start"
}
2025-11-18 15:43:15 | INFO     | Connection #1: TTS Start Time
2025-11-18 15:43:15 | INFO     | Connection #1: =================================
2025-11-18 15:43:16 | INFO     | Connection #1: Received emoji message | Emotion: happy
2025-11-18 15:43:19 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:19 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:19 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:43:19 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:19 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "是的"
}
2025-11-18 15:43:19 | INFO     | Connection #1: TTS Sentence Start | Text: 是的
2025-11-18 15:43:19 | INFO     | Connection #1: =================================
2025-11-18 15:43:19 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:19 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:19 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:43:19 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:19 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:43:19 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:43:19 | INFO     | Connection #1: =================================
2025-11-18 15:43:19 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:19 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:19 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:43:19 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:19 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "，长粒香米是东北大米的优质品种之一，颗粒细长，煮熟后香气浓郁、口感松软有弹性"
}
2025-11-18 15:43:19 | INFO     | Connection #1: TTS Sentence Start | Text: ，长粒香米是东北大米的优质品种之一，颗粒细长，煮熟后香气浓郁、口感松软有弹性
2025-11-18 15:43:19 | INFO     | Connection #1: =================================
2025-11-18 15:43:27 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:27 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:27 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:43:27 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:27 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:43:27 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:43:27 | INFO     | Connection #1: =================================
2025-11-18 15:43:27 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:27 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:27 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:43:27 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:27 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "，深受喜爱。它的米香确实比较突出，适合日常煮饭或搭配菜肴。"
}
2025-11-18 15:43:27 | INFO     | Connection #1: TTS Sentence Start | Text: ，深受喜爱。它的米香确实比较突出，适合日常煮饭或搭配菜肴。
2025-11-18 15:43:27 | INFO     | Connection #1: =================================
2025-11-18 15:43:33 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:33 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:33 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:43:33 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:33 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:43:33 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:43:33 | INFO     | Connection #1: =================================
2025-11-18 15:43:33 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:33 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:33 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:43:33 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:33 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "购买时建议选正规渠道，注意生产日期和产地标识哦。"
}
2025-11-18 15:43:33 | INFO     | Connection #1: TTS Sentence Start | Text: 购买时建议选正规渠道，注意生产日期和产地标识哦。
2025-11-18 15:43:33 | INFO     | Connection #1: =================================
2025-11-18 15:43:38 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:38 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:38 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:43:38 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:38 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:43:38 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:43:38 | INFO     | Connection #1: =================================
2025-11-18 15:43:38 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:38 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:38 | INFO     | Connection #1: State: stop
2025-11-18 15:43:38 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:38 | INFO     | Connection #1: {
  "type": "tts",
  "state": "stop"
}
2025-11-18 15:43:38 | INFO     | Connection #1: TTS Stop Time | Duration: 22949.26ms
2025-11-18 15:43:38 | INFO     | Connection #1: =================================
2025-11-18 15:43:38 | INFO     | Connection #1: Received complete response at 22.2s
2025-11-18 15:43:38 | INFO     | ✓ Response received: [STT] 你好，我想买点东北大米，听说长粒香米煮饭特别香，是真的吗？ | [LLM] 是的 ，长粒香米是东北大米的优质品种之一，颗粒细长，煮熟后香气浓郁、口感松软有弹性 ，深受喜爱。它的米香确实比较...
2025-11-18 15:43:38 | INFO     | 
============================================================
2025-11-18 15:43:38 | INFO     | Testing [PURCHASE] #001: 购买 #1...
2025-11-18 15:43:38 | INFO     | Audio file: purchase_001.opus
2025-11-18 15:43:38 | INFO     | ============================================================
2025-11-18 15:43:38 | INFO     | Detected Ogg Opus container, converting with ffmpeg...
2025-11-18 15:43:38 | INFO     | Converting Ogg Opus to PCM and re-encoding to raw Opus packets...
2025-11-18 15:43:38 | INFO     | Processed remaining 134 bytes PCM data with 1786 bytes padding (total 136454 bytes)
2025-11-18 15:43:38 | INFO     | Generated 72 raw Opus packets from PCM data (total 13957 bytes, processed 136454 bytes PCM, coverage: 98.7%)
2025-11-18 15:43:38 | INFO     | Detected 72 raw Opus packets from Ogg container. These MUST be sent individually (one per WebSocket message), ignoring SPLIT_OPUS_PACKETS=False
2025-11-18 15:43:38 | INFO     | Connection #1: ========== SEND START_LISTEN ==========
2025-11-18 15:43:38 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:38 | INFO     | Connection #1: WebSocket URL: ws://192.168.110.53:8081/?sn=FC012C2EA0CC&sign=f5059bd1dadd6580df0fa398360390cd&platform=hw&bid=TKAI_BOARD_03_4G_VB6824_EYE_ST7789&fv=0.0.1&fvc=20250908001&strategy_id=0&uid=0&board_type=ml307&recover=0&enableP3=2&tool=idf&screen=1
2025-11-18 15:43:38 | INFO     | Connection #1: Session ID: None
2025-11-18 15:43:38 | INFO     | Connection #1: Message Content:
2025-11-18 15:43:38 | INFO     | Connection #1: {
  "session_id": "",
  "type": "start_listen",
  "data": {
    "format": "opus",
    "tts_format": "opus",
    "playTag": 1,
    "state": "asr",
    "mode": "manual"
  }
}
2025-11-18 15:43:38 | INFO     | Connection #1: Message Size: 140 bytes
2025-11-18 15:43:38 | INFO     | Connection #1: =======================================
2025-11-18 15:43:44 | INFO     | Connection #1: ========== STT RESPONSE ==========
2025-11-18 15:43:44 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:44 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:44 | INFO     | Connection #1: {
  "type": "stt",
  "text": "听起来不错，我购买东北大米长粒香5公斤。"
}
2025-11-18 15:43:44 | INFO     | Connection #1: Response Time: 4730.26ms (from send_start)
2025-11-18 15:43:44 | INFO     | Connection #1: Recognized Text: 听起来不错，我购买东北大米长粒香5公斤。
2025-11-18 15:43:44 | INFO     | Connection #1: =================================
2025-11-18 15:43:44 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:44 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:44 | INFO     | Connection #1: State: start
2025-11-18 15:43:44 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:44 | INFO     | Connection #1: {
  "type": "tts",
  "state": "start"
}
2025-11-18 15:43:44 | INFO     | Connection #1: TTS Start Time | Duration: 24573.67ms
2025-11-18 15:43:44 | INFO     | Connection #1: =================================
2025-11-18 15:43:45 | INFO     | Connection #1: Received emoji message | Emotion: happy
2025-11-18 15:43:47 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:47 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:47 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:43:47 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:47 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "很高兴你决定购买！"
}
2025-11-18 15:43:47 | INFO     | Connection #1: TTS Sentence Start | Text: 很高兴你决定购买！
2025-11-18 15:43:47 | INFO     | Connection #1: =================================
2025-11-18 15:43:49 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:49 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:49 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:43:49 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:49 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:43:49 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:43:49 | INFO     | Connection #1: =================================
2025-11-18 15:43:49 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:49 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:49 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:43:49 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:49 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "5公斤装的长粒香米通常性价比不错，足够家庭食用一段时间。"
}
2025-11-18 15:43:49 | INFO     | Connection #1: TTS Sentence Start | Text: 5公斤装的长粒香米通常性价比不错，足够家庭食用一段时间。
2025-11-18 15:43:49 | INFO     | Connection #1: =================================
2025-11-18 15:43:55 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:55 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:55 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:43:55 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:55 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:43:55 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:43:55 | INFO     | Connection #1: =================================
2025-11-18 15:43:55 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:55 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:55 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:43:55 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:55 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "建议选择密封包装以保持新鲜，存放于阴凉干燥处。"
}
2025-11-18 15:43:55 | INFO     | Connection #1: TTS Sentence Start | Text: 建议选择密封包装以保持新鲜，存放于阴凉干燥处。
2025-11-18 15:43:55 | INFO     | Connection #1: =================================
2025-11-18 15:43:59 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:59 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:59 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:43:59 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:59 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:43:59 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:43:59 | INFO     | Connection #1: =================================
2025-11-18 15:43:59 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:43:59 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:43:59 | INFO     | Connection #1: State: sentence_start
2025-11-18 15:43:59 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:43:59 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_start",
  "text": "如果有其他需求，比如有机认证或特定品牌，也可以留意一下，确保买到心仪的品质。"
}
2025-11-18 15:43:59 | INFO     | Connection #1: TTS Sentence Start | Text: 如果有其他需求，比如有机认证或特定品牌，也可以留意一下，确保买到心仪的品质。
2025-11-18 15:43:59 | INFO     | Connection #1: =================================
2025-11-18 15:44:06 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:44:06 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:44:06 | INFO     | Connection #1: State: sentence_end
2025-11-18 15:44:06 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:44:06 | INFO     | Connection #1: {
  "type": "tts",
  "state": "sentence_end"
}
2025-11-18 15:44:06 | INFO     | Connection #1: TTS Sentence End
2025-11-18 15:44:06 | INFO     | Connection #1: =================================
2025-11-18 15:44:06 | INFO     | Connection #1: ========== TTS RESPONSE ==========
2025-11-18 15:44:06 | INFO     | Connection #1: Device SN: FC012C2EA0CC
2025-11-18 15:44:06 | INFO     | Connection #1: State: stop
2025-11-18 15:44:06 | INFO     | Connection #1: Full Response Data:
2025-11-18 15:44:06 | INFO     | Connection #1: {
  "type": "tts",
  "state": "stop"
}
2025-11-18 15:44:06 | INFO     | Connection #1: TTS Stop Time | Duration: 22756.67ms
2025-11-18 15:44:06 | INFO     | Connection #1: =================================
2025-11-18 15:44:07 | INFO     | Connection #1: Received complete response at 22.0s
2025-11-18 15:44:07 | INFO     | ✓ Response received: [STT] 听起来不错，我购买东北大米长粒香5公斤。 | [LLM] 很高兴你决定购买！ 5公斤装的长粒香米通常性价比不错，足够家庭食用一段时间。 建议选择密封包装以保持新鲜，存放于阴凉干燥处。 如果...
2025-11-18 15:44:07 | INFO     | SN FC012C2EA0CC (Conn #1): 任务处理完成
2025-11-18 15:46:34 | WARNING  | Connection #1: Connection closed by server/network, received 685 messages total
